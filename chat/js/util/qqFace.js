/**
 *
 * @author daijm
 */
var weixinJson = require('./face/weixin.json');
var weixinSymbol = require('./face/weixinSymbol.json');
var unicode = require('./unicode.js');
var ZC_Face = {
    initConfig : function(options,callback) {//å°†è¡¨æƒ…é›†åˆé¢„åŠ è½½
        var _this = this;
        var o = options;
        var reg = require('./face/Reg.js');
        _this.emojiImagePath = require('./face/imagepath.json');
        _this.saytext = o.saytext || "";
        _this.Group = o.Group || "";
        _this.faceGroup = o.faceGroup || "";
        _this.emojiGroup = o.emojiGroup || "";
        //_this.showId=o.showId||"";
        _this.emotion = o.emotion || "";
        _this.saytext = o.saytext || "";
        //_this.sub_btn=o.sub_btn||"";
        _this.path = o.path || "";
        _this.emojiPath = o.emojiPath || "";
        //show
        _this.tip = weixinJson;
        //analysis
        _this.tip2 = weixinSymbol;
        //emojishow
        _this.emojiTip = ["u1F60A","u1F60B","u1F60C","u1F60D","u1F60E","u1F60F","u1F61A","u1F61C","u1F61D","u1F61E","u1F61F","u1F62A","u1F62B","u1F62C","u1F62D","u1F62E","u1F600","u1F601","u1F602","u1F603","u1F605","u1F606","u1F607","u1F608","u1F609","u1F611","u1F612","u1F613","u1F614","u1F615","u1F616","u1F618","u1F621","u1F622","u1F623","u1F624","u1F628","u1F629","u1F630","u1F631","u1F632","u1F633","u1F634","u1F635","u1F636","u1F637","u1F648","u1F649","u1F680","u2B50","u23F0","u23F3","u26A1","u26BD","u26C4","u26C5","u261D","u263A","u270A","u270B","u270C","u270F","u2600","u2601","u2614","u2615","u2744","u1F3A4","u1F3B2","u1F3B5","u1F3C0","u1F3C2","u1F3E1","u1F004","u1F4A1","u1F4A2","u1F4A3","u1F4A4","u1F4A9","u1F4AA","u1F4B0","u1F4DA","u1F4DE","u1F4E2","u1F6AB","u1F6BF","u1F30F","u1F33B","u1F35A","u1F36B","u1F37B","u1F44A","u1F44C","u1F44D","u1F44E","u1F44F","u1F46A","u1F46B","u1F47B","u1F47C","u1F47D","u1F47F","u1F48A","u1F48B","u1F48D","u1F52B","u1F64A","u1F64F","u1F319","u1F332","u1F339","u1F349","u1F356","u1F366","u1F377","u1F381","u1F382","u1F384","u1F389","u1F393","u1F434","u1F436","u1F437","u1F451","u1F484","u1F494","u1F525","u1F556"];
        _this.emojiSymbolTip = ["ğŸ˜Š","ğŸ˜‹","ğŸ˜Œ","ğŸ˜","ğŸ˜","ğŸ˜","ğŸ˜š","ğŸ˜œ","ğŸ˜","ğŸ˜","ğŸ˜Ÿ","ğŸ˜ª","ğŸ˜«","ğŸ˜¬","ğŸ˜­","ğŸ˜®","ğŸ˜€","ğŸ˜","ğŸ˜‚","ğŸ˜ƒ","ğŸ˜…","ğŸ˜†","ğŸ˜‡","ğŸ˜ˆ","ğŸ˜‰","ğŸ˜‘","ğŸ˜’","ğŸ˜“","ğŸ˜”","ğŸ˜•","ğŸ˜–","ğŸ˜˜","ğŸ˜¡","ğŸ˜¢","ğŸ˜£","ğŸ˜¤","ğŸ˜¨","ğŸ˜©","ğŸ˜°","ğŸ˜±","ğŸ˜²","ğŸ˜³","ğŸ˜´","ğŸ˜µ","ğŸ˜¶","ğŸ˜·","ğŸ™ˆ","ğŸ™‰","ğŸš€","â­","â°","â³","âš¡","âš½","â›„","â›…","â˜","â˜º","âœŠ","âœ‹","âœŒ","âœ","â˜€","â˜","â˜”","â˜•","â„","ğŸ¤","ğŸ²","ğŸµ","ğŸ€","ğŸ‚","ğŸ¡","ğŸ€„","ğŸ’¡","ğŸ’¢","ğŸ’£","ğŸ’¤","ğŸ’©","ğŸ’ª","ğŸ’°","ğŸ“š","ğŸ“","ğŸ“¢","ğŸš«","ğŸš¿","ğŸŒ","ğŸŒ»","ğŸš","ğŸ«","ğŸ»","ğŸ‘Š","ğŸ‘Œ","ğŸ‘","ğŸ‘","ğŸ‘","ğŸ‘ª","ğŸ‘«","ğŸ‘»","ğŸ‘¼","ğŸ‘½","ğŸ‘¿","ğŸ’Š","ğŸ’‹","ğŸ’","ğŸ”«","ğŸ™Š","ğŸ™","ğŸŒ™","ğŸŒ²","ğŸŒ¹","ğŸ‰","ğŸ–","ğŸ¦","ğŸ·","ğŸ","ğŸ‚","ğŸ„","ğŸ‰","ğŸ“","ğŸ´","ğŸ¶","ğŸ·","ğŸ‘‘","ğŸ’„","ğŸ’”","ğŸ”¥","ğŸ•–"];
        /* _this.emojiSymbolTip =
         * ['\u{1F60A}','\u{1F60B}','\u{1F60C}','\u{1F60D}','\u{1F60E}','\u{1F60F}','\u{1F61A}','\u{1F61C}','\u{1F61D}','\u{1F61E}','\u{1F61F}','\u{1F62A}','\u{1F62B}','\u{1F62C}','\u{1F62D}','\u{1F62E}','\u{1F600}','\u{1F601}','\u{1F602}','\u{1F603}','\u{1F605}','\u{1F606}','\u{1F607}','\u{1F608}','\u{1F609}','\u{1F611}','\u{1F612}','\u{1F613}','\u{1F614}','\u{1F615}','\u{1F616}','\u{1F618}','\u{1F621}','\u{1F622}','\u{1F623}','\u{1F624}','\u{1F628}','\u{1F629}','\u{1F630}','\u{1F631}','\u{1F632}','\u{1F633}','\u{1F634}','\u{1F635}','\u{1F636}','\u{1F637}','\u{1F648}','\u{1F649}','\u{1F680}','\u{2B50}','\u{23F0}','\u{23F3}','\u{26A1}','\u{26BD}','\u{26C4}','\u{26C5}','\u{261D}','\u{263A}','\u{270A}','\u{270B}','\u{270C}','\u{270F}','\u{2600}','\u{2601}','\u{2614}','\u{2615}','\u{2744}','\u{1F3A4}','\u{1F3B2}','\u{1F3B5}','\u{1F3C0}','\u{1F3C2}','\u{1F3E1}','\u{1F004}','\u{1F4A1}','\u{1F4A2}','\u{1F4A3}','\u{1F4A4}','\u{1F4A9}','\u{1F4AA}','\u{1F4B0}','\u{1F4DA}','\u{1F4DE}','\u{1F4E2}','\u{1F6AB}','\u{1F6BF}','\u{1F30F}','\u{1F33B}','\u{1F35A}','\u{1F36B}','\u{1F37B}','\u{1F44A}','\u{1F44C}','\u{1F44D}','\u{1F44E}','\u{1F44F}','\u{1F46A}','\u{1F46B}','\u{1F47B}','\u{1F47C}','\u{1F47D}','\u{1F47F}','\u{1F48A}','\u{1F48B}','\u{1F48D}','\u{1F52B}','\u{1F64A}','\u{1F64F}','\u{1F319}','\u{1F332}','\u{1F339}','\u{1F349}','\u{1F356}','\u{1F366}','\u{1F377}','\u{1F381}','\u{1F382}','\u{1F384}','\u{1F389}','\u{1F393}','\u{1F434}','\u{1F436}','\u{1F437}','\u{1F451}','\u{1F484}','\u{1F494}','\u{1F525}','\u{1F556}'];
         */
        _this.reg = /\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\(|\/::\+|\/:â€“b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\|-\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\(|\/:B-\)|\/:<@|\/:@>|\/::-O|\/:>-\||\/:P-\(|\/::'\||\/:X-\)|\/::\*|\/:@x|\/:8\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>|\/å¾®ç¬‘|\/æ’‡å˜´|\/è‰²|\/å‘å‘†|\/å¾—æ„|\/æµæ³ª|\/å®³ç¾|\/é—­å˜´|\/ç¡|\/å¤§å“­|\/å°´å°¬|\/å‘æ€’|\/è°ƒçš®|\/å‘²ç‰™|\/æƒŠè®¶|\/éš¾è¿‡|\/é…·|\/å†·æ±—|\/è¡°|\/éª·é«…|\/æ•²æ‰“|\/å†è§|\/æ“¦æ±—|\/æŠ é¼»|\/é¼“æŒ|\/ç³—å¤§äº†|\/åç¬‘|\/å·¦å“¼å“¼|\/å³å“¼å“¼|\/å“ˆæ¬ |\/é„™è§†|\/å§”å±ˆ|\/å¿«å“­äº†|\/é˜´é™©|\/äº²äº²|\/å“|\/å¯æ€œ|\/æŠ“ç‹‚|\/å|\/å·ç¬‘|\/æ„‰å¿«|\/ç™½çœ¼|\/å‚²æ…¢|\/é¥¥é¥¿|\/å›°|\/æƒŠæ|\/æµæ±—|\/æ†¨ç¬‘|\/æ‚ é—²|\/å¥‹æ–—|\/å’’éª‚|\/ç–‘é—®|\/å˜˜|\/æ™•|\/ç–¯äº†|\/ç¯®çƒ|\/ä¹’ä¹“|\/å’–å•¡|\/é¥­|\/çŒªå¤´|\/ç«ç‘°|\/è°ƒè°¢|\/å˜´å”‡|\/çˆ±å¿ƒ|\/å¿ƒç¢|\/è›‹ç³•|\/é—ªç”µ|\/ç‚¸å¼¹|\/åˆ€|\/è¶³çƒ|\/ç“¢è™«|\/ä¾¿ä¾¿|\/æœˆäº®|\/å¤ªé˜³|\/ç¤¼ç‰©|\/æ‹¥æŠ±|\/èœåˆ€|\/è¥¿ç“œ|\/å•¤é…’|\/å¼±|\/æ¡æ‰‹|\/èƒœåˆ©|\/æŠ±æ‹³|\/å‹¾å¼•|\/æ‹³å¤´|\/å·®åŠ²|\/çˆ±ä½ |\/NO|NO|\/OK|OK|\/çˆ±æƒ…|\/é£å»|\/è·³è·³|\/å¼º|\/å‘æŠ–|\/æ€„ç«|\/è½¬åœˆ|\/ç£•å¤´|\/å›å¤´|\/è·³ç»³|\/æŠ•é™|\/æ¿€åŠ¨|\/ä¹±èˆ|\/çŒ®å»|\/å·¦å¤ªæ|\/å³å¤ªæ|\[å¾®ç¬‘\]|\[æ’‡å˜´\]|\[è‰²\]|\[å‘å‘†\]|\[å¾—æ„\]|\[æµæ³ª\]|\[å®³ç¾\]|\[é—­å˜´\]|\[ç¡\]|\[å¤§å“­\]|\[å°´å°¬\]|\[å‘æ€’\]|\[è°ƒçš®\]|\[å‘²ç‰™\]|\[æƒŠè®¶\]|\[éš¾è¿‡\]|\[é…·\]|\[å†·æ±—\]|\[è¡°\]|\[éª·é«…\]|\[æ•²æ‰“\]|\[å†è§\]|\[æ“¦æ±—\]|\[æŠ é¼»\]|\[é¼“æŒ\]|\[ç³—å¤§äº†\]|\[åç¬‘\]|\[å·¦å“¼å“¼\]|\[å³å“¼å“¼\]|\[å“ˆæ¬ \]|\[é„™è§†\]|\[å§”å±ˆ\]|\[å¿«å“­äº†\]|\[é˜´é™©\]|\[äº²äº²\]|\[å“\]|\[å¯æ€œ\]|\[æŠ“ç‹‚\]|\[å\]|\[å·ç¬‘\]|\[æ„‰å¿«\]|\[ç™½çœ¼\]|\[å‚²æ…¢\]|\[é¥¥é¥¿\]|\[å›°\]|\[æƒŠæ\]|\[æµæ±—\]|\[æ†¨ç¬‘\]|\[æ‚ é—²\]|\[å¥‹æ–—\]|\[å’’éª‚\]|\[ç–‘é—®\]|\[å˜˜\]|\[æ™•\]|\[ç–¯äº†\]|\[ç¯®çƒ\]|\[ä¹’ä¹“\]|\[å’–å•¡\]|\[é¥­\]|\[çŒªå¤´\]|\[ç«ç‘°\]|\[è°ƒè°¢\]|\[å˜´å”‡\]|\[çˆ±å¿ƒ\]|\[å¿ƒç¢\]|\[è›‹ç³•\]|\[é—ªç”µ\]|\[ç‚¸å¼¹\]|\[åˆ€\]|\[è¶³çƒ\]|\[ç“¢è™«\]|\[ä¾¿ä¾¿\]|\[æœˆäº®\]|\[å¤ªé˜³\]|\[ç¤¼ç‰©\]|\[æ‹¥æŠ±\]|\[èœåˆ€\]|\[è¥¿ç“œ\]|\[å•¤é…’\]|\[å¼±\]|\[æ¡æ‰‹\]|\[èƒœåˆ©\]|\[æŠ±æ‹³\]|\[å‹¾å¼•\]|\[æ‹³å¤´\]|\[å·®åŠ²\]|\[çˆ±ä½ \]|\[NO|NO\]|\[OK|OK\]|\[çˆ±æƒ…\]|\[é£å»\]|\[è·³è·³\]|\[å¼º\]|\[å‘æŠ–\]|\[æ€„ç«\]|\[è½¬åœˆ\]|\[ç£•å¤´\]|\[å›å¤´\]|\[è·³ç»³\]|\[æŠ•é™\]|\[æ¿€åŠ¨\]|\[ä¹±èˆ\]|\[çŒ®å»\]|\[å·¦å¤ªæ\]|\[å³å¤ªæ\]/g;
        _this.reg2 = /\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\(|\/::\+|\/:â€“b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\|-\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\(|\/:B-\)|\/:<@|\/:@>|\/::-O|\/:>-\||\/:P-\(|\/::'\||\/:X-\)|\/::\*|\/:@x|\/:8\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>|\/å¾®ç¬‘|\/æ’‡å˜´|\/è‰²|\/å‘å‘†|\/å¾—æ„|\/æµæ³ª|\/å®³ç¾|\/é—­å˜´|\/ç¡|\/å¤§å“­|\/å°´å°¬|\/å‘æ€’|\/è°ƒçš®|\/å‘²ç‰™|\/æƒŠè®¶|\/éš¾è¿‡|\/é…·|\/å†·æ±—|\/è¡°|\/éª·é«…|\/æ•²æ‰“|\/å†è§|\/æ“¦æ±—|\/æŠ é¼»|\/é¼“æŒ|\/ç³—å¤§äº†|\/åç¬‘|\/å·¦å“¼å“¼|\/å³å“¼å“¼|\/å“ˆæ¬ |\/é„™è§†|\/å§”å±ˆ|\/å¿«å“­äº†|\/é˜´é™©|\/äº²äº²|\/å“|\/å¯æ€œ|\/æŠ“ç‹‚|\/å|\/å·ç¬‘|\/æ„‰å¿«|\/ç™½çœ¼|\/å‚²æ…¢|\/é¥¥é¥¿|\/å›°|\/æƒŠæ|\/æµæ±—|\/æ†¨ç¬‘|\/æ‚ é—²|\/å¥‹æ–—|\/å’’éª‚|\/ç–‘é—®|\/å˜˜|\/æ™•|\/ç–¯äº†|\/ç¯®çƒ|\/ä¹’ä¹“|\/å’–å•¡|\/é¥­|\/çŒªå¤´|\/ç«ç‘°|\/è°ƒè°¢|\/å˜´å”‡|\/çˆ±å¿ƒ|\/å¿ƒç¢|\/è›‹ç³•|\/é—ªç”µ|\/ç‚¸å¼¹|\/åˆ€|\/è¶³çƒ|\/ç“¢è™«|\/ä¾¿ä¾¿|\/æœˆäº®|\/å¤ªé˜³|\/ç¤¼ç‰©|\/æ‹¥æŠ±|\/èœåˆ€|\/è¥¿ç“œ|\/å•¤é…’|\/å¼±|\/æ¡æ‰‹|\/èƒœåˆ©|\/æŠ±æ‹³|\/å‹¾å¼•|\/æ‹³å¤´|\/å·®åŠ²|\/çˆ±ä½ |\/NO|NO|\/OK|OK|\/çˆ±æƒ…|\/é£å»|\/è·³è·³|\/å¼º|\/å‘æŠ–|\/æ€„ç«|\/è½¬åœˆ|\/ç£•å¤´|\/å›å¤´|\/è·³ç»³|\/æŠ•é™|\/æ¿€åŠ¨|\/ä¹±èˆ|\/çŒ®å»|\/å·¦å¤ªæ|\/å³å¤ªæ|\[å¾®ç¬‘\]|\[æ’‡å˜´\]|\[è‰²\]|\[å‘å‘†\]|\[å¾—æ„\]|\[æµæ³ª\]|\[å®³ç¾\]|\[é—­å˜´\]|\[ç¡\]|\[å¤§å“­\]|\[å°´å°¬\]|\[å‘æ€’\]|\[è°ƒçš®\]|\[å‘²ç‰™\]|\[æƒŠè®¶\]|\[éš¾è¿‡\]|\[é…·\]|\[å†·æ±—\]|\[è¡°\]|\[éª·é«…\]|\[æ•²æ‰“\]|\[å†è§\]|\[æ“¦æ±—\]|\[æŠ é¼»\]|\[é¼“æŒ\]|\[ç³—å¤§äº†\]|\[åç¬‘\]|\[å·¦å“¼å“¼\]|\[å³å“¼å“¼\]|\[å“ˆæ¬ \]|\[é„™è§†\]|\[å§”å±ˆ\]|\[å¿«å“­äº†\]|\[é˜´é™©\]|\[äº²äº²\]|\[å“\]|\[å¯æ€œ\]|\[æŠ“ç‹‚\]|\[å\]|\[å·ç¬‘\]|\[æ„‰å¿«\]|\[ç™½çœ¼\]|\[å‚²æ…¢\]|\[é¥¥é¥¿\]|\[å›°\]|\[æƒŠæ\]|\[æµæ±—\]|\[æ†¨ç¬‘\]|\[æ‚ é—²\]|\[å¥‹æ–—\]|\[å’’éª‚\]|\[ç–‘é—®\]|\[å˜˜\]|\[æ™•\]|\[ç–¯äº†\]|\[ç¯®çƒ\]|\[ä¹’ä¹“\]|\[å’–å•¡\]|\[é¥­\]|\[çŒªå¤´\]|\[ç«ç‘°\]|\[è°ƒè°¢\]|\[å˜´å”‡\]|\[çˆ±å¿ƒ\]|\[å¿ƒç¢\]|\[è›‹ç³•\]|\[é—ªç”µ\]|\[ç‚¸å¼¹\]|\[åˆ€\]|\[è¶³çƒ\]|\[ç“¢è™«\]|\[ä¾¿ä¾¿\]|\[æœˆäº®\]|\[å¤ªé˜³\]|\[ç¤¼ç‰©\]|\[æ‹¥æŠ±\]|\[èœåˆ€\]|\[è¥¿ç“œ\]|\[å•¤é…’\]|\[å¼±\]|\[æ¡æ‰‹\]|\[èƒœåˆ©\]|\[æŠ±æ‹³\]|\[å‹¾å¼•\]|\[æ‹³å¤´\]|\[å·®åŠ²\]|\[çˆ±ä½ \]|\[NO|NO\]|\[OK|OK\]|\[çˆ±æƒ…\]|\[é£å»\]|\[è·³è·³\]|\[å¼º\]|\[å‘æŠ–\]|\[æ€„ç«\]|\[è½¬åœˆ\]|\[ç£•å¤´\]|\[å›å¤´\]|\[è·³ç»³\]|\[æŠ•é™\]|\[æ¿€åŠ¨\]|\[ä¹±èˆ\]|\[çŒ®å»\]|\[å·¦å¤ªæ\]|\[å³å¤ªæ\]/;
        _this.emojiReg = reg.emojiReg;
        for(var a in _this.tip) {
            var img = new Image();
            img.src = _this.path + _this.tip[a] + '.gif';
        }
        //callback&&callback();
    },
    show : function() {
        var _this = this;
        var strFace = '';
        //var i=0;
        if($('#faceBox').length <= 0) {//é›†åˆå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º
            strFace = '<div id="faceBox" class="face">' + '<ul>';
            for(var a in _this.tip) {
                //i++
                strFace += '<li><img class="faceIco" src="' + _this.path + _this.tip[a] + '.gif" data-src="' + a + '" /></li>';
                //if( i % 14 == 0 ) strFace += '</tr><tr>';
            }
            strFace += '</ul></div>';
            $(_this.faceGroup).append(strFace);
        }
        _this.sendTotextArea(_this.saytext);

    },
    emojiShow : function() {
        var _this = this;
        var strFace = '';
        if($('#emojiBox').length <= 0) {//é›†åˆå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º
            strFace = '<div id="emojiBox" class="face">' + '<ul>';

            for(var i = 0;i <= _this.emojiTip.length - 1;i++) {

                strFace += '<li><img class="faceIco" src="' + _this.emojiPath + _this.emojiTip[i] + '.png" data-src="' + _this.emojiSymbolTip[i] + '" /></li>';
                //if( i % 15 == 14 ) strFace += '';
            }
            strFace += '</ul></div>';
            $(emojiGroup).append(strFace);

        }
        _this.isHidden();
        //åˆ¤æ–­ä¸¤ä¸ªè¡¨æƒ…é›†åˆæ˜¯å¦æ˜¯æ˜¾ç¤ºçŠ¶æ€
        _this.emojiSendTotextArea(_this.saytext);
    },
    isHidden : function() {
        var _this = this;
        //console.log($(_this.Group).css("display"));
        //console.log($(_this.Group).css("display")=="block");

        if($(_this.Group).css("display") == "block") {
            $(_this.Group).css("display","none")
        } else {
            $(_this.Group).css("display","block")
        }

        $(_this.saytext).focus(function() {//å½“æ–‡æœ¬æ¡†è·å–ç„¦ç‚¹çš„æ—¶å€™éšè—è¡¨æƒ…é›†åˆ
            $(_this.Group).hide();
        });

    },
    sendTotextArea : function() {
        var _this = this;
        $(document.body).undelegate();
        $(document.body).delegate(".faceIco",'click', function(e) {
            var elm = e.currentTarget;
            var src = $(elm).attr("data-src");
            var currentSaytext = $(_this.saytext).val() + src;
            //å°†æ–°è¡¨æƒ…è¿½åŠ åˆ°å¾…å‘é€æ¡†é‡Œ
            //console.log($(tareId).val());
            //$("#saytext").val("");
            $(_this.saytext).val('');
            $(_this.saytext).val(currentSaytext);
            $(_this.Group).hide();
            //éšè—è¡¨æƒ…é›†åˆ

            //cbk && cbk(src);
        });

    },
    emojiSendTotextArea : function() {
        var _this = this;
        $(document.body).undelegate();
        $(document.body).delegate(".faceIco",'click', function(e) {
            var elm = e.currentTarget;
            var src = $(elm).attr("data-src");
            var reg = /u([0-9A-Za-z]{5})/;

            var currentSaytext = $(_this.saytext).val() + src;
            //å°†æ–°è¡¨æƒ…è¿½åŠ åˆ°å¾…å‘é€æ¡†é‡Œ
            $(_this.saytext).val('');
            $(_this.saytext).val(currentSaytext);
            $(_this.Group).hide();
            //éšè—è¡¨æƒ…é›†åˆ
            $(_this.saytext).focus();
            //
            //cbk && cbk(src);
        });

    },
    analysis : function(str) {//å°†æ–‡æœ¬æ¡†å†…çš„è¡¨æƒ…å­—ç¬¦è½¬åŒ–ä¸ºè¡¨æƒ…
        var _this = this;
        var icoAry = str.match(_this.reg);
        //å°†åŒ¹é…åˆ°çš„ç»“æœæ”¾åˆ°icoAryè¿™ä¸ªæ•°ç»„é‡Œé¢ï¼Œæ¥è·å–é•¿åº¦
        if(icoAry) {
            for(var i = 0;i < icoAry.length;i++) {
                var ico = _this.reg2.exec(str);
                var path= _this.tip2[ico[0]];
                //é‡æ–°åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„è¡¨æƒ…å­—ç¬¦
                //console.log(ico[0]);

                str = str.replace(_this.reg2,'<img src="' + _this.path + path + '.gif" border="0" />',1);
            }
        }

        var arr = str.match(_this.emojiReg);
        for(var i = 0,
            len = arr.length;i < len;i++) {
            var ico = _this.emojiReg.exec(str);
            var path = _this.emojiImagePath[ico[0]];
            str = str.replace(ico[0],'<img src="' + _this.emojiPath + path + '" border="0" />',1);
        }
        console.log(str);
        return str;
    },
    hasEmotion : function(str) {//å°†æ–‡æœ¬æ¡†å†…çš„è¡¨æƒ…å­—ç¬¦è½¬åŒ–ä¸ºè¡¨æƒ…
        //console.log(str);
        return this.reg.test(str) || this.emojiReg.test(str);
    },
    convertToEmoji : function(src) {
        var _this = this;
        if(_this.emojiReg.test(src)) {
             
        }
        return src;
    }
};

module.exports = ZC_Face;
